<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title><%= title %> | FUNKOSHOP</title>
        <meta name="description" content="HTML-CSS">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/css/index.css">
    </head>

<body>
    <!-- Header -->
    <%- include('../partials/header.ejs') %>

    <main class="admin-container container">
        
        <section class="admin__search">
            <iconify-icon class="admin__search-icon" icon="charm:search" width="44"></iconify-icon>
            <input class="admin__search-bar" type="text" name="search" id="search" placeholder="código, nombre o categoría">
        </section>

        <section class="admin__list">
            <div class="admin__header">
                <h2>LISTADO DE PRODUCTOS</h2>
                <span class="admin__header-add">AGREGAR<a href="/admin/create"><iconify-icon class="admin__add-icon icon-primary" icon="bxs:plus-square" width="40" height="40" style="color: #f33;"></iconify-icon></a></span>
            </div>
            <div class="admin-table">
                <article class="admin-table__header">
                    <h3>ID</h3>
                    <h3>Código</h3>
                    <h3>Nombre del Producto</h3>
                    <h3>Categoría</h3>
                </article>
                
                <% data.forEach(item => { %>
                    <article class="admin-table__row">
                        <p><%= item.product_id %></p>
                        <p><%= item.sku %></p>
                        <p><%= item.product_name %></p>
                        <p><%= item.category_name %></p>
                        <a href="/admin/edit/<%= item.product_id %>"><iconify-icon icon="mdi:pencil" width="32" class="admin-edit-icon icon-secondary" style="color: #1d84b5;"></iconify-icon></a>
                        <form action="/admin/delete/<%= item.product_id %>?_method=DELETE" method="POST" >
                            <button type="submit"><iconify-icon icon="heroicons-solid:trash" class="admin-delete-icon icon-primary" width="32" style="color: #f33;"></iconify-icon></button>
                        </form>
                    </article>
                <% }) %>

            </div>
        </section>
    </main>

    <!--  footer  -->
    <%- include('../partials/footer.ejs') %>

    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
</body>
</html>